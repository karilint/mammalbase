{% extends "mb/base_generic.html" %}
{% block title %}
<title>MammalBase - {{ source_location }}</title>
{% endblock %}
{% block content %} {% load custom_tags %}
<!--Article header -->
<header style="display:none">
  <h1>MammalBase - {{ source_location }}</h1>
</header>
<!--End of article header -->
<section class="w3-threequarter w3-container">
  <header class="w3-container w3-text-teal">
    <h2>{{ source_location }}</h2>
  </header>


    {% if request.user|is_data_admin_or_contributor %}
      <br>
      <br>
    {% endif %}
    <table class="mb-list w3-table-all w3-small w3-responsive">
      <thead>
        <tr>
          <th>Name</th>
          <th>ID</th>
        </tr>
      </thead>
      <tbody>
        {% for location in result_locations %}
        <tr>
          {% if location.name %}
            <td>{{ location.name }}</td>
          {% else %}
            <td style="text-align:center">-</td>
          {% endif %}
          {% if location.geonameId %}
            <td><a href="https://www.geonames.org/{{ location.geonameId }}">{{ location.geonameId }}</a></td>
          {% else %}
            <td style="text-align:center">-</td>
          {% endif %}
            <td><button onclick="executePythonFunction()">Match</button>

                <script>
                    function executePythonFunction() {
                        fetch('/match_location/')
                            .then(response => response.text())
                            .then(data => alert(data))
                            .catch(error => console.error('Error:', error));
                    }
                </script></td>
          
        </tr>
        {% endfor %}
      </tbody>
    </table>
 
  </section>
{% endblock %}
{% block info %}
  {% include 'info/diet_set_info.html' %}
{% endblock %}
{% block pagination %}
  {% include 'mb/pagination.html' %}
{% endblock %}
{% block script %}
{% endblock %}
