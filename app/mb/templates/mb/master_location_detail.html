{% extends "mb/base_generic.html" %}
{% block title %}
<title>MammalBase - Master Location: {{ master_location.name }}</title>
{% endblock %}
{% block content %} {% load custom_tags %}
<!--Article header -->
<header style="display:none">
  <h1>MammalBase - Master Location: {{ master_location.name }}</h1>
</header>
<!--End of article header -->

<div class="w3-bar w3-border-bottom" style="margin-bottom:16px;">
  <button class="w3-bar-item w3-button tablink {% if not show_source_tab %}w3-teal{% endif %}" onclick="openTab(event,'MasterTab')">Master</button>
  <button class="w3-bar-item w3-button tablink {% if show_source_tab %}w3-teal{% endif %}" onclick="openTab(event,'SourceTab')">Source</button>
  <button class="w3-bar-item w3-button tablink" onclick="openTab(event,'OccurrenceTab')">Occurrences</button>
</div>

<div id="MasterTab" class="tab" style="display:{% if not show_source_tab %}block{% else %}none{% endif %}">
<section class="w3-threequarter w3-container">
  <header class="w3-container w3-text-teal">
    <h2 style="display:none">Master Location: {{ master_location.name }}</h2>
  </header>
  <br>
{% include 'includes/detail_action_buttons.html' with object=master_location edit_url='master_location-edit' delete_url='master_location-delete' %}
  <table class="mb-detail w3-table-all">
    <caption class="w3-left-align">Master Location: {{ master_location.name }}</caption>
    <tr>
      <th class="w3-quarter">Name:</th>
      <td class="w3-threequarter">{{ master_location.name }}</td>
    </tr>
    <tr>
      <th class="w3-quarter">Continent:</th>
      <td class="w3-threequarter">{{ master_location.continent }}</td>
    </tr>
    <tr>
      <th class="w3-quarter">Country:</th>
      <td class="w3-threequarter">({{ master_location.country_code }}) {{ master_location.country }}</td>
    </tr>
    <tr>
      <tr>
        <th class="w3-quarter">County:</th>
        <td class="w3-threequarter">{{ master_location.county }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Decimal Latitude:</th>
        <td class="w3-threequarter">{{ master_location.decimal_latitude }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Decimal Longitude:</th>
        <td class="w3-threequarter">{{ master_location.decimal_longitude }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Geodetic Datum:</th>
        <td class="w3-threequarter">{{ master_location.geodetic_datum }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Locality:</th>
        <td class="w3-threequarter">{{ master_location.locality }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Location According to</th>
        <td class="w3-threequarter">{{ master_location.location_according_to }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Location ID</th>
        <td class="w3-threequarter"><a title="Press for Details" target="_blank"
          href="https://geonames.org/{{ master_location.location_id }}">{{ master_location.location_id }}<span class="fa fa-link w3-small"></span></a></td>
      </tr>
      <tr>
        <th class="w3-quarter">Location Remarks</th>
        <td class="w3-threequarter">{{ master_location.location_rermarks }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Maximum Elevation in Meters</th>
        <td class="w3-threequarter">{{ master_location.maximum_elevation_in_meters }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Minimum Elevation in Meters</th>
        <td class="w3-threequarter">{{ master_location.minimum_elevation_in_meters }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Municipality</th>
        <td class="w3-threequarter">{{ master_location.municipality }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">State Province</th>
        <td class="w3-threequarter">{{ master_location.state_province }}</td>
      </tr>
  </table>
</section>
</div>

<div id="SourceTab" class="tab" style="display:{% if show_source_tab %}block{% else %}none{% endif %}">
<section class="w3-threequarter w3-container">
  <header class="w3-container w3-text-teal">
    <h2>Matched Source Locations</h2>
  </header>

  {% include 'includes/find.html' %}

  {% if page_obj %}
  <table class="mb-list w3-table-all w3-small w3-responsive">
    <thead>
      <tr>
        <th>Name</th>
        <th>Reference</th>
      </tr>
    </thead>
    <tbody>
      {% for sl in page_obj %}
      <tr>
        <td>{{ sl.name }}</td>
        <td>{{ sl.reference }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>There are no matched source locations.</p>
  {% endif %}
</section>
</div>

<div id="OccurrenceTab" class="tab" style="display:none;">
<section class="w3-threequarter w3-container">
  <header class="w3-container w3-text-teal">
    <h2>Occurrences</h2>
  </header>

  {% if occurrences %}
  <table class="mb-list w3-table-all w3-small w3-responsive">
    <thead>
      <tr>
        <th>Taxon</th>
        <th>Rank</th>
        <th>Higher Classification</th>
      </tr>
    </thead>
    <tbody>
      {% for me in occurrences %}
      <tr>
        <td class="mb-public-internal"><a title="Press for Details" href="{% url 'master_entity-detail' pk=me.pk %}">{{ me.name }} <span class="fa fa-link w3-small"></span></a></td>
        <td>{{ me.entity }}</td>
        <td>{{ me.taxon.higher_classification }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>There are no occurrences.</p>
  {% endif %}
</section>
</div>

{% endblock %}
{% block info %}
{% endblock %}
{% block pagination %}
{% endblock %}
{% block script %}{% endblock %}
