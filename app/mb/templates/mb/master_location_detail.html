{% extends "mb/base_generic.html" %}
{% block title %}
<title>MammalBase - Master Locations</title>
{% endblock %}
{% block content %} {% load custom_tags %}
<!--Article header -->
<header style="display:none">
  <h1>MammalBase - Standard References</h1>
</header>
<!--End of article header -->
<section class="w3-threequarter w3-container">
  <header class="w3-container w3-text-teal">
    <h2>Master Location</h2>
  </header>

  <!-- {% include 'includes/find.html' %} -->
  {% if master_location %}
  {% if request.user|is_data_admin_or_contributor %}
      <br>
      <br>
    {% endif %}
    <div class="mb-detail w3-bar w3-right-align">
      <a title="Press to Go Back" class="w3-button w3-medium w3-round w3-padding-small w3-teal" onclick="backFunction()"><span class="fa fa-arrow-left"></span></a>
      {% if request.user|is_data_admin_or_owner:master_location %}
      <a title="Press to Edit" class="w3-button w3-medium w3-round w3-padding-small w3-teal" href="{% url 'master_location-edit' pk=master_location.pk %}"><span class="fa fa-pencil-square-o"></span></a>
      <a title="Press to Delete" class="w3-button w3-medium w3-round w3-padding-small w3-teal" href="{% url 'master_location-delete' pk=master_location.pk %}"><span class="fa  fa-trash-o"></span></a>
      {% else %}
      <button title="Please login to Edit" class="w3-disabled w3-button w3-medium w3-round w3-padding-small w3-teal"><span class="fa fa-pencil-square-o"></span></button>
      <button title="Please login to Delete" class="w3-disabled w3-button w3-medium w3-round w3-padding-small w3-teal"><span class="fa  fa-trash-o"></span></button>
      {% endif %}
    </div>
    <table class="mb-detail w3-table-all w3-responsive">
      <caption class="mb-detail w3-left-align">Master Location: {{ master_location.name }}</caption>
      <tr>
        <th class="w3-quarter">Name:</th>
        <td class="w3-threequarter">{{ master_location.name }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Higher Geography ID:</th>
        <td class="w3-threequarter">
          {% for x in related_objects %}
            <p><a href="/ml_detail/{{ x.id }}">{{ x.name }}</a></p>
          {% endfor %}
        </td>
      </tr>
      <tr>
        <th class="w3-quarter">Country:</th>
        <td class="w3-threequarter">{{ master_location.country }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Continent:</th>
        <td class="w3-threequarter">{{ master_location.continent }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Country Code:</th>
        <td class="w3-threequarter">{{ master_location.country }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">County:</th>
        <td class="w3-threequarter">{{ master_location.county }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Decimal Latitude:</th>
        <td class="w3-threequarter">{{ master_location.decimalLatitude }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Decimal Longitude</th>
        <td class="w3-threequarter">{{ master_location.decimalLongitude }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Geodetic Datum</th>
        <td class="w3-threequarter">{{ master_location.geodedicDatum }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Locality</th>
        <td class="w3-threequarter">{{ master_location.locality }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Location According to</th>
        <td class="w3-threequarter">{{ master_location.locationAccordingTo }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Location ID</th>
        <td class="w3-threequarter">{{ master_location.locationID }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Location Remarks</th>
        <td class="w3-threequarter">{{ master_location.locationRermarks }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Maximum Elevation in Meters</th>
        <td class="w3-threequarter">{{ master_location.maximumElevationInMeters }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Minimum Elevation in Meters</th>
        <td class="w3-threequarter">{{ master_location.minimumElevationInMeters }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Municipality</th>
        <td class="w3-threequarter">{{ master_location.municipality }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">State Province</th>
        <td class="w3-threequarter">{{ master_location.stateProvince }}</td>
      </tr>
      <tr>
        <th class="w3-quarter">Reference:</th>
        <td class="mb-private-internal w3-threequarter"><a title="Press for Details" href="{% url 'master_reference-detail' pk=master_location.reference.id %}">{{ master_location.reference }}<span class="fa fa-link w3-small"></span></a></td>
      </tr>
    </table>
    <!-- <table class="mb-list w3-table-all w3-small w3-responsive"> -->
    <table class="dataframe" border="1">
      <caption class="w3-left-align">Table 1. List of Occurrences related with <b><i>{{ master_location }}</i></b>.</caption>
      <thead>
      {%if occurrences %}
      
      <!--<tr> -->
        {% if user.is_authenticated %}
          <!-- <td class="mb-private-internal"><br> -->
            <!-- <table> -->
              <tr>
                <th><h2>Event</h2></th>
                <th><h2>Master Entity</h2></th>
                <th><h2>Organism Quantity</h2></th>
                <th><h2>Organism Quantity Type</h2></th>
                <th><h2>Sex</h2></th>
                <th><h2>Life Stage</h2></th>
                <th><h2>Occurrence Remarks</h2></th>
                <th><h2>Reference</h2></th>
                <th><h2>Associated References</h2></th>
              </tr>
              {% for occurrence in occurrences %} <!-- hae relaatiotaulun avulla sourcelocationit. Ei siis nÃ¤in!-->
              <tr>
                <td>{{ occurrence.event }}</td>
                <td>{{ occurrence.master_entity }}</td>
                <td>{{ occurrence.organism_quantity }}</td>
                <td>{{ occurrence.organism_quantity_type }}</td>
                <td>{{ occurrence.gender }}</td>
                <td>{{ occurrence.life_stage }}</td>
                <td>{{ occurrence.occurrence_remarks }}</td>
                <td>{{ occurrence.reference }}</td>
                <td>{{ occurrence.associated_references }}</td>
              </tr>
              {% endfor %}
            <!-- </table> -->
          <!-- </td> -->
        {% else %}
          <td class="mb-private-internal"><a title="Please login for Details" style="color:IndianRed;" href=""> <span class="fa fa-link w3-small"></span></a></td>
        {% endif %}
        <!--
        <td class="mb-private-internal" title="sa.source_attribute.method|safe">{{ occurrence.method |default_if_none:"-" }}</td>
        <td title="{{ sa.source_attribute.reference|safe }}">{{ occurrence.reference|truncatechars:50|safe }}</td>
        -->
      <!-- </tr> -->
      {% else %}
      <tr><td colspan="2">There are no related Occurrences available.</td></tr>
      {% endif %}
    </table>
    {% if request.user|is_data_admin_or_contributor %}
    <br>
    <a title="Press to Add new" class="w3-button w3-tiny w3-round w3-padding-small w3-teal" href="{% url 'attribute-relation-new' master_attribute.id %}"><span class="fa fa-plus"></span></a>
    {% else %}
    <button title="Please login to Add new" class="w3-disabled w3-button w3-tiny w3-round w3-padding-small w3-teal"><span class="fa fa-plus"></span></button>
    <br>
    {% endif %}
  {% else %}
    <p>There are no Master Location available.</p>
  {% endif %}
  </section>
{% endblock %}
{% block info %}
{% endblock %}
{% block pagination %}
  {% include 'mb/pagination.html' %}
{% endblock %}
{% block script %}
{% endblock %}
